@using Pulse.Posts.UI.Components
@using Pulse.Posts.UI.Models
@using Pulse.Shared.UI.Components

@code {
    [Parameter]
    public required IEnumerable<PostViewModel> EagerPosts { get; set; } = new List<PostViewModel>();

    [Parameter]
    public required IEnumerable<Guid> LazyPostIds { get; set; } = new List<Guid>();

    [Parameter]
    public string? ContinuationToken { get; set; }

    private string GetContinuationUrl() => !string.IsNullOrWhiteSpace(ContinuationToken) 
            ? $"/api/timeline?continuationToken={ContinuationToken}"
            : string.Empty;
}

<InfinitelyScrollingFeedPage EagerItems="@EagerPosts.ToList()" ContinuationUrl="@GetContinuationUrl()"
    FeedElementSelector="#user-feed" Context="post">
    <ItemTemplate>
        <Panel>
            <Post CurrentPost="@post" />
        </Panel>
    </ItemTemplate>
</InfinitelyScrollingFeedPage>